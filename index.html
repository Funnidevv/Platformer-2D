<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parkour Proto</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #111;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: #222;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Player {
      constructor() {
        this.x = 50;
        this.y = 50;
        this.width = 30;
        this.height = 30;
        this.velX = 0;
        this.velY = 0;
        this.speed = 4;
        this.jumpForce = -12;
        this.grounded = false;
      }

      update(keys, platforms) {
        // Horizontal movement
        if (keys["ArrowLeft"]) this.velX = -this.speed;
        else if (keys["ArrowRight"]) this.velX = this.speed;
        else this.velX = 0;

        // Gravity
        this.velY += 0.6;

        // Jumping
        if (keys["ArrowUp"] && this.grounded) {
          this.velY = this.jumpForce;
          this.grounded = false;
        }

        this.x += this.velX;
        this.y += this.velY;

        // Collision detection
        this.grounded = false;
        for (let plat of platforms) {
          if (this.x < plat.x + plat.width &&
              this.x + this.width > plat.x &&
              this.y + this.height < plat.y + 10 &&
              this.y + this.height + this.velY >= plat.y) {
            this.y = plat.y - this.height;
            this.velY = 0;
            this.grounded = true;
          }
        }
      }

      draw() {
        ctx.fillStyle = "#0ff";
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }
    }

    class Platform {
      constructor(x, y, width, height) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
      }

      draw() {
        ctx.fillStyle = "#888";
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }
    }

    const player = new Player();
    const keys = {};

    const platforms = [
      new Platform(0, canvas.height - 40, canvas.width, 40),
      new Platform(150, canvas.height - 140, 120, 20),
      new Platform(300, canvas.height - 240, 120, 20),
      new Platform(450, canvas.height - 340, 120, 20),
      new Platform(600, canvas.height - 440, 120, 20),
    ];

    document.addEventListener("keydown", (e) => keys[e.key] = true);
    document.addEventListener("keyup", (e) => keys[e.key] = false);

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      player.update(keys, platforms);
      player.draw();
      for (let plat of platforms) {
        plat.draw();
      }
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
